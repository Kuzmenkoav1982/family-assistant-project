# üì± –ü–æ–ª–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º –≤ –ø—Ä–æ–µ–∫—Ç–µ

## üéØ –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã **–î–í–ï –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:

### 1. **–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (–Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ - –ª–æ–∫–∞–ª—å–Ω—ã–µ)
- üìç –§–∞–π–ª: `src/services/notificationService.ts`
- ‚öôÔ∏è –†–∞–±–æ—Ç–∞—é—Ç: **–õ–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —á–µ—Ä–µ–∑ Notification API**
- üîî –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç: –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä—è–º–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- ‚è∞ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è: –î–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ —Å–æ–±—ã—Ç–∏—è—Ö
- ‚úÖ –ü–ª—é—Å—ã: –†–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞, –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ, –Ω–µ —Ç—Ä–µ–±—É—é—Ç –±—ç–∫–µ–Ω–¥–∞
- ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –†–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫—Ä—ã—Ç, –æ—á–∏—â–∞—é—Ç—Å—è –ø—Ä–∏ —á–∏—Å—Ç–∫–µ –∫—ç—à–∞

### 2. **Server Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** (—Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ - —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ)
- üìç –§–∞–π–ª: `src/hooks/useNotifications.ts` + –±—ç–∫–µ–Ω–¥ `/backend/push-notifications`
- ‚öôÔ∏è –†–∞–±–æ—Ç–∞—é—Ç: **–ß–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä Cloud Functions + Web Push API**
- üîî –û—Ç–ø—Ä–∞–≤–ª—è—é—Ç: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Service Worker –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Å–∞–π—Ç –∑–∞–∫—Ä—ã—Ç
- üì≤ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è: –î–ª—è —Å–µ–º–µ–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π (–≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, –∑–∞–¥–∞—á–∏, –ø–æ–∫—É–ø–∫–∏, –¥–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è)
- ‚úÖ –ü–ª—é—Å—ã: –†–∞–±–æ—Ç–∞—é—Ç –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Å–∞–π—Ç –∑–∞–∫—Ä—ã—Ç, persistent, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç: Service Worker, –ø–æ–¥–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ –±—ç–∫–µ–Ω–¥, VAPID –∫–ª—é—á–∏

---

## üÜï –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–µ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (NotificationService)

### üìÇ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

#### ‚úÖ **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** (`src/pages/Calendar.tsx`)
- **–ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è —Å –≤–∫–ª—é—á—ë–Ω–Ω—ã–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: 
  - –ó–∞–ø–ª–∞–Ω–∏—Ä—É–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—É—é –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è
  - –î–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç —Å–ª–µ–¥—É—é—â–µ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
  - –û—Ç–º–µ–Ω—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
- **–ö–æ–¥**:
```typescript
if (eventData.reminderEnabled && eventData.reminderDate && eventData.reminderTime) {
  const reminderDateTime = new Date(`${eventData.reminderDate}T${eventData.reminderTime}`);
  NotificationService.scheduleNotification(
    `–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: ${eventData.title}`,
    eventData.description || `–°–æ–±—ã—Ç–∏–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ: ${eventData.date}`,
    reminderDateTime,
    eventData.id,
    eventData.isRecurring ? eventData.recurringPattern : undefined
  );
}
```

#### ‚úÖ **–ö–Ω–æ–ø–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π** (`src/components/calendar/NotificationPermissionButton.tsx`)
- **–ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –í —à–∞–ø–∫–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**:
  - üîî "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã" (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ)
  - üîï "–í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" (–µ—Å–ª–∏ –Ω–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)

#### ‚úÖ **–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** (`src/App.tsx`)
- **–ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**: –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **–ß—Ç–æ –¥–µ–ª–∞–µ—Ç**: –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ localStorage
- **–ö–æ–¥**:
```typescript
useEffect(() => {
  NotificationService.restoreScheduledNotifications();
}, []);
```

---

### üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. **requestPermission()** - –ó–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
```typescript
const hasPermission = await NotificationService.requestPermission();
```
- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `true` –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ, `false` –µ—Å–ª–∏ –Ω–µ—Ç

#### 2. **scheduleNotification()** - –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```typescript
NotificationService.scheduleNotification(
  title: string,              // –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  body: string,               // –¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  scheduledTime: Date,        // –ö–æ–≥–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
  eventId: string,            // ID —Å–æ–±—ã—Ç–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
  recurringPattern?: {        // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–ª—è –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —Å–æ–±—ã—Ç–∏–π
    frequency: 'daily' | 'weekly' | 'monthly' | 'yearly',
    interval: number,         // –ö–∞–∂–¥—ã–µ N –¥–Ω–µ–π/–Ω–µ–¥–µ–ª—å/–º–µ—Å—è—Ü–µ–≤/–ª–µ—Ç
    endDate?: string,         // –î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π
    daysOfWeek?: number[]     // –î–ª—è weekly: –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ (0=–í–°, 1=–ü–ù, –∏ —Ç.–¥.)
  }
);
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```typescript
// –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
NotificationService.scheduleNotification(
  "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –°—Ç—Ä–∏–∂–∫–∞",
  "–ó–∞–≤—Ç—Ä–∞ –≤ 14:00",
  new Date('2026-01-23T13:00:00'),
  'event-123'
);

// –ü–æ–≤—Ç–æ—Ä—è—é—â–µ–µ—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ –ø–æ –ü–ù –∏ –ü–¢)
NotificationService.scheduleNotification(
  "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞",
  "–ü–æ—Ä–∞ –∏–¥—Ç–∏ –≤ –∑–∞–ª!",
  new Date('2026-01-27T18:00:00'),
  'event-456',
  {
    frequency: 'weekly',
    interval: 1,
    daysOfWeek: [1, 5],  // –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –∏ –ø—è—Ç–Ω–∏—Ü–∞
    endDate: '2026-12-31'
  }
);
```

#### 3. **showNotification()** - –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
```typescript
NotificationService.showNotification("–ó–∞–≥–æ–ª–æ–≤–æ–∫", "–¢–µ–∫—Å—Ç");
```

#### 4. **cancelNotification()** - –û—Ç–º–µ–Ω–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
```typescript
NotificationService.cancelNotification(eventId);
```

#### 5. **hasPermission()** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
```typescript
const granted = NotificationService.hasPermission();
```

#### 6. **restoreScheduledNotifications()** - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```typescript
NotificationService.restoreScheduledNotifications();
```

---

### üìä –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

1. **Daily (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)**: 
   - –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `interval` –¥–Ω–µ–π
   - –ü—Ä–∏–º–µ—Ä: interval=2 ‚Üí –∫–∞–∂–¥—ã–µ 2 –¥–Ω—è

2. **Weekly (–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)**:
   - –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã `daysOfWeek` ‚Üí —Ç–æ–ª—å–∫–æ –≤ —ç—Ç–∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏
   - –ò–Ω–∞—á–µ ‚Üí –∫–∞–∂–¥—ã–µ `interval` –Ω–µ–¥–µ–ª—å –≤ —Ç–æ—Ç –∂–µ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
   - –ü—Ä–∏–º–µ—Ä: daysOfWeek=[1,3,5], interval=1 ‚Üí –∫–∞–∂–¥—ã–µ –ü–ù, –°–†, –ü–¢

3. **Monthly (–µ–∂–µ–º–µ—Å—è—á–Ω–æ)**:
   - –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `interval` –º–µ—Å—è—Ü–µ–≤ –≤ —Ç–æ –∂–µ —á–∏—Å–ª–æ
   - –ü—Ä–∏–º–µ—Ä: interval=1 ‚Üí –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü 23-–≥–æ —á–∏—Å–ª–∞

4. **Yearly (–µ–∂–µ–≥–æ–¥–Ω–æ)**:
   - –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ `interval` –ª–µ—Ç –≤ —Ç—É –∂–µ –¥–∞—Ç—É
   - –ü—Ä–∏–º–µ—Ä: interval=1 ‚Üí –∫–∞–∂–¥—ã–π –≥–æ–¥ –≤ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è

---

## üì° Server Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (useNotifications)

### üìÇ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

#### ‚úÖ **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** (`src/pages/Calendar.tsx`)
```typescript
const { notifyCalendarEvent } = useNotifications();

// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å–æ–±—ã—Ç–∏—è
notifyCalendarEvent(eventData.title, new Date(eventData.date).toLocaleDateString('ru-RU'), false);
```

#### ‚è≥ **–ì–¥–µ –µ—â—ë –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** (–ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):

1. **–ó–∞–¥–∞—á–∏** (`/tasks`) - –∫–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞
```typescript
const { notifyTaskAssigned } = useNotifications();
notifyTaskAssigned(taskTitle, assigneeName, taskId);
```

2. **–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è** (`/voting`) - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
```typescript
const { notifyVotingCreated } = useNotifications();
notifyVotingCreated(votingTitle, votingId);
```

3. **–ü–æ–∫—É–ø–∫–∏** (`/shopping`) - —Å—Ä–æ—á–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏
```typescript
const { notifyUrgentShopping } = useNotifications();
notifyUrgentShopping(itemName);
```

4. **–õ–µ–∫–∞—Ä—Å—Ç–≤–∞** (`/health`) - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø—Ä–∏—ë–º–µ
```typescript
const { notifyMedicationReminder } = useNotifications();
notifyMedicationReminder(medicationName, childName, time);
```

5. **–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è** (`/family`) - –∑–∞ –¥–µ–Ω—å –∏–ª–∏ –≤ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
```typescript
const { notifyBirthday } = useNotifications();
notifyBirthday(name, isTomorrow);
```

6. **–ü–æ–¥–ø–∏—Å–∫–∞** (`/settings`) - –∫–æ–≥–¥–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç
```typescript
const { notifySubscriptionExpiring } = useNotifications();
notifySubscriptionExpiring(daysLeft);
```

---

### üîß –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

```typescript
const {
  sendNotification,           // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞
  notifyVotingCreated,        // –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ
  notifyUrgentShopping,       // –°—Ä–æ—á–Ω–∞—è –ø–æ–∫—É–ø–∫–∞
  notifyTaskAssigned,         // –ó–∞–¥–∞—á–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞
  notifyCalendarEvent,        // –°–æ–±—ã—Ç–∏–µ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
  notifySubscriptionExpiring, // –ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç
  notifyMedicationReminder,   // –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ª–µ–∫–∞—Ä—Å—Ç–≤–µ
  notifyBirthday,            // –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
} = useNotifications();
```

---

## üéØ –ì–¥–µ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

### üü¢ –ì–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (–Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å):

1. **–ó–∞–¥–∞—á–∏** (`src/pages/Tasks.tsx` –∏–ª–∏ –≥–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏)
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–¥–∞—á–∏ ‚Üí `notifyTaskAssigned()`
   - –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
   - –ü—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –¥–µ–¥–ª–∞–π–Ω–∞ ‚Üí –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è

2. **–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è** (`src/pages/VotingPage.tsx`)
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è ‚Üí `notifyVotingCreated()`
   - –ü—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è ‚Üí –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è

3. **–ü–æ–∫—É–ø–∫–∏** (`src/pages/Shopping.tsx`)
   - –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å—Ä–æ—á–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ ‚Üí `notifyUrgentShopping()`
   - –ö–æ–≥–¥–∞ —Ç–æ–≤–∞—Ä –∫—É–ø–ª–µ–Ω ‚Üí –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è

4. **–ó–¥–æ—Ä–æ–≤—å–µ/–î–µ—Ç–∏** (`src/pages/Health.tsx` –∏–ª–∏ `src/pages/Children.tsx`)
   - –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞—Ö ‚Üí `notifyMedicationReminder()`
   - –ü—Ä–∏—ë–º—ã –≤—Ä–∞—á–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å
   - –ü—Ä–∏–≤–∏–≤–∫–∏ ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å

5. **–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è** (`src/pages/Tree.tsx` –∏–ª–∏ —Å–µ–º–µ–π–Ω–æ–µ –¥–µ—Ä–µ–≤–æ)
   - –ó–∞ –¥–µ–Ω—å –¥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è ‚Üí `notifyBirthday(name, true)`
   - –í –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è ‚Üí `notifyBirthday(name, false)`

6. **–ü–æ–¥–ø–∏—Å–∫–∞** (`src/pages/Settings.tsx`)
   - –ó–∞ 7/3/1 –¥–µ–Ω—å –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è ‚Üí `notifySubscriptionExpiring(daysLeft)`

### üîµ –ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å):

1. **–ü–æ–µ–∑–¥–∫–∏** (`src/pages/Trips.tsx`)
   - –ó–∞ –¥–µ–Ω—å –¥–æ –ø–æ–µ–∑–¥–∫–∏
   - –í—Ä–µ–º—è –≤—ã–µ–∑–¥–∞

2. **–°–µ–º–µ–π–Ω—ã–µ —Ü–µ–ª–∏** (`src/pages/Index.tsx`)
   - –ö–æ–≥–¥–∞ —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞
   - –ö–æ–≥–¥–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞—Å—Ç–æ–ø–æ—Ä–∏–ª—Å—è

3. **–û–±—É—á–µ–Ω–∏–µ** (`src/pages/Education.tsx`)
   - –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
   - –≠–∫–∑–∞–º–µ–Ω—ã

4. **–ü–∏—Ç–∞–Ω–∏–µ** (`src/pages/Meals.tsx`)
   - –ü–æ—Ä–∞ –≥–æ—Ç–æ–≤–∏—Ç—å —É–∂–∏–Ω
   - –ü—Ä–æ–¥—É–∫—Ç—ã –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üìç –ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è:
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: `src/components/NotificationsSettings.tsx`
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞**: `/settings` ‚Üí —Ä–∞–∑–¥–µ–ª "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è"
- **–•—É–∫**: `src/hooks/usePushNotifications.ts`

### üéõÔ∏è –ß—Ç–æ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
1. **–í–∫–ª—é—á–∏—Ç—å/–æ—Ç–∫–ª—é—á–∏—Ç—å** –≤—Å–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
2. **–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** (–∫–∞–ª–µ–Ω–¥–∞—Ä—å, –∑–∞–¥–∞—á–∏, –ø–æ–∫—É–ø–∫–∏ –∏ —Ç.–¥.)
3. **–¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö** - –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –≤—Ä—É—á–Ω—É—é
5. **–ü–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∫–∞** - –æ–±–Ω–æ–≤–∏—Ç—å VAPID –∫–ª—é—á–∏

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å—Ä–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å):
1. ‚úÖ **–ö–∞–ª–µ–Ω–¥–∞—Ä—å** - —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. üü° **–ó–∞–¥–∞—á–∏** - `notifyTaskAssigned()` –≥–æ—Ç–æ–≤–∞, –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å
3. üü° **–î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è** - `notifyBirthday()` –≥–æ—Ç–æ–≤–∞, –Ω—É–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):
4. üü° **–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è** - `notifyVotingCreated()` –≥–æ—Ç–æ–≤–∞
5. üü° **–ü–æ–∫—É–ø–∫–∏ —Å—Ä–æ—á–Ω—ã–µ** - `notifyUrgentShopping()` –≥–æ—Ç–æ–≤–∞
6. üü° **–õ–µ–∫–∞—Ä—Å—Ç–≤–∞** - `notifyMedicationReminder()` –≥–æ—Ç–æ–≤–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ø–æ –∂–µ–ª–∞–Ω–∏—é):
7. üü¢ **–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç** - `notifySubscriptionExpiring()` –≥–æ—Ç–æ–≤–∞
8. üîµ **–ü–æ–µ–∑–¥–∫–∏** - –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
9. üîµ **–¶–µ–ª–∏** - –Ω—É–∂–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: localStorage (`scheduledNotifications`)
- **–¢–∞–π–º–µ—Ä—ã**: setTimeout (—Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ, –Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è)
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ setTimeout ~24 –¥–Ω—è
- **–†–∞–±–æ—Ç–∞–µ—Ç –≤**: Chrome, Firefox, Edge, Safari (–≤ PWA)

### –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:
- **–ë—ç–∫–µ–Ω–¥**: `/backend/push-notifications/index.py`
- **Service Worker**: `/public/sw.js`
- **–ü–æ–¥–ø–∏—Å–∫–∏**: –•—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤ PostgreSQL
- **VAPID –∫–ª—é—á–∏**: –í —Å–µ–∫—Ä–µ—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
- **–†–∞–±–æ—Ç–∞–µ—Ç –≤**: Chrome, Firefox, Edge, Safari PWA (iOS 16.4+)

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤:

| –ë—Ä–∞—É–∑–µ—Ä | –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | Server Push | 
|---------|----------------------|-------------|
| Chrome Desktop | ‚úÖ | ‚úÖ |
| Firefox Desktop | ‚úÖ | ‚úÖ |
| Edge | ‚úÖ | ‚úÖ |
| Safari Desktop | ‚úÖ | ‚ùå |
| Chrome Android | ‚úÖ | ‚úÖ |
| Safari iOS (–±—Ä–∞—É–∑–µ—Ä) | ‚ùå | ‚ùå |
| Safari iOS (PWA) | ‚úÖ | ‚úÖ (iOS 16.4+) |

---

## üìù –ò—Ç–æ–≥–∏

### –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ  
‚úÖ –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
‚úÖ –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π  
‚úÖ –ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏  
‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è  

### –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
üü° –ó–∞–¥–∞—á–∏, –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è, –ü–æ–∫—É–ø–∫–∏, –õ–µ–∫–∞—Ä—Å—Ç–≤–∞, –î–Ω–∏ —Ä–æ–∂–¥–µ–Ω–∏—è, –ü–æ–¥–ø–∏—Å–∫–∞  

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
üîµ –ü–æ–µ–∑–¥–∫–∏, –¶–µ–ª–∏, –û–±—É—á–µ–Ω–∏–µ, –ü–∏—Ç–∞–Ω–∏–µ  

---

**–°–æ–∑–¥–∞–Ω–æ**: 2026-01-22  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–ê–≤—Ç–æ—Ä**: –Æ—Ä–∞ üöÄ
