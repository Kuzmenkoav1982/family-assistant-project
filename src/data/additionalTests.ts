import { TestQuestion, TestResult } from '@/components/InteractiveTest';

export const conflictResolutionQuestions: TestQuestion[] = [
  {
    id: 'cr1',
    text: 'Когда возникает конфликт в семье, вы обычно:',
    options: [
      { value: '5', label: 'Спокойно обсуждаю проблему, ищу компромисс', score: 5 },
      { value: '4', label: 'Пытаюсь найти решение, но иногда эмоционален', score: 4 },
      { value: '3', label: 'Избегаю прямого столкновения, жду пока само пройдет', score: 3 },
      { value: '2', label: 'Настаиваю на своей правоте', score: 2 },
      { value: '1', label: 'Ухожу, хлопаю дверью или игнорирую', score: 1 }
    ]
  },
  {
    id: 'cr2',
    text: 'Как часто вы признаете свою неправоту в конфликтах?',
    options: [
      { value: '5', label: 'Всегда, если действительно был неправ', score: 5 },
      { value: '4', label: 'Часто — мне важнее отношения, чем быть правым', score: 4 },
      { value: '3', label: 'Иногда — зависит от ситуации', score: 3 },
      { value: '2', label: 'Редко — мне сложно признавать ошибки', score: 2 },
      { value: '1', label: 'Практически никогда — обычно я прав', score: 1 }
    ]
  },
  {
    id: 'cr3',
    text: 'Что вы делаете сразу после конфликта?',
    options: [
      { value: '5', label: 'Обсуждаем ситуацию, делаем выводы, мирюсь', score: 5 },
      { value: '4', label: 'Даю время остыть, потом возвращаюсь к разговору', score: 4 },
      { value: '3', label: 'Делаю вид, что ничего не было', score: 3 },
      { value: '2', label: 'Долго обижаюсь и не разговариваю', score: 2 },
      { value: '1', label: 'Ухожу в себя, копю обиду', score: 1 }
    ]
  },
  {
    id: 'cr4',
    text: 'Как вы реагируете на повышение голоса в споре?',
    options: [
      { value: '5', label: 'Прошу говорить спокойнее, сам не повышаю голос', score: 5 },
      { value: '4', label: 'Стараюсь сохранять спокойствие', score: 4 },
      { value: '3', label: 'Замолкаю и ухожу', score: 3 },
      { value: '2', label: 'Тоже начинаю говорить громче', score: 2 },
      { value: '1', label: 'Кричу в ответ еще громче', score: 1 }
    ]
  },
  {
    id: 'cr5',
    text: 'Умеете ли вы извиняться первым?',
    options: [
      { value: '5', label: 'Да, легко извиняюсь, если чувствую вину', score: 5 },
      { value: '4', label: 'Да, хотя иногда сложно переступить через гордость', score: 4 },
      { value: '3', label: 'Зависит от ситуации — кто больше виноват', score: 3 },
      { value: '2', label: 'Сложно — жду, когда другой извинится', score: 2 },
      { value: '1', label: 'Нет, я не извиняюсь первым по принципу', score: 1 }
    ]
  }
];

export function getConflictResolutionResults(answers: Record<string, string>): TestResult {
  const score = Object.values(answers).reduce((sum, val) => sum + parseInt(val), 0);
  const maxScore = 25;
  const percentage = (score / maxScore) * 100;

  let category = '';
  let interpretation = '';
  let recommendations: string[] = [];

  if (percentage >= 80) {
    category = 'Конструктивное разрешение конфликтов';
    interpretation = 'У вас отличные навыки управления конфликтами! Вы умеете спокойно обсуждать проблемы, признавать свою неправоту и находить компромиссы. Вы не избегаете конфликтов, а используете их как возможность для роста отношений.';
    recommendations = [
      'Продолжайте быть примером конструктивного поведения в конфликтах',
      'Помогайте другим членам семьи развивать навыки разрешения споров',
      'Создавайте безопасное пространство для обсуждения проблем'
    ];
  } else if (percentage >= 60) {
    category = 'Хорошие навыки с некоторыми сложностями';
    interpretation = 'В целом вы справляетесь с конфликтами, но иногда эмоции берут верх. Вы понимаете важность конструктивного диалога, но не всегда применяете это на практике.';
    recommendations = [
      'Практикуйте технику "тайм-аута": если накалились страсти, сделайте перерыв',
      'Используйте "Я-сообщения" вместо обвинений',
      'Перед конфликтным разговором сформулируйте, чего хотите достичь',
      'После конфликта обязательно обсуждайте, что было хорошо и что улучшить'
    ];
  } else if (percentage >= 40) {
    category = 'Требуется развитие навыков';
    interpretation = 'Конфликты для вас — это стресс и дискомфорт. Возможно, вы их избегаете или, наоборот, реагируете слишком эмоционально. Важно научиться воспринимать конфликты как нормальную часть отношений.';
    recommendations = [
      'Изучите базовые техники ненасильственного общения',
      'Практикуйте правило: критикуем действия, а не личность',
      'Заведите правило: не уходить от разговора, но и не кричать',
      'Учитесь извиняться — это сила, а не слабость',
      'Читайте: "Трудные диалоги" Стоун, Паттон, Хин'
    ];
  } else {
    category = 'Деструктивные паттерны поведения';
    interpretation = 'Ваш способ реагирования на конфликты может разрушать отношения. Возможно, вы избегаете обсуждения проблем, уходите в себя или, наоборот, реагируете агрессивно. Важно изменить эти паттерны для здоровых отношений.';
    recommendations = [
      'Обратитесь к семейному психологу — это нормально и эффективно',
      'Начните с малого: учитесь спокойно говорить о мелких проблемах',
      'Создайте правила ссор: не оскорблять, не вспоминать прошлое, не обобщать',
      'Практикуйте дыхательные техники для снижения эмоционального напряжения',
      'Изучите концепцию "эмоциональной регуляции"',
      'Помните: цель конфликта — не победить, а найти решение'
    ];
  }

  return {
    score,
    maxScore,
    category,
    interpretation,
    recommendations
  };
}

export const stressManagementQuestions: TestQuestion[] = [
  {
    id: 'sm1',
    text: 'Как часто вы чувствуете стресс в повседневной жизни?',
    options: [
      { value: '5', label: 'Редко — обычно я спокоен и уравновешен', score: 5 },
      { value: '4', label: 'Иногда — в напряженные периоды', score: 4 },
      { value: '3', label: 'Достаточно часто — несколько раз в неделю', score: 3 },
      { value: '2', label: 'Очень часто — почти каждый день', score: 2 },
      { value: '1', label: 'Постоянно — я живу в состоянии стресса', score: 1 }
    ]
  },
  {
    id: 'sm2',
    text: 'Какие у вас есть способы снятия стресса?',
    options: [
      { value: '5', label: 'Несколько здоровых способов: спорт, хобби, медитация', score: 5 },
      { value: '4', label: 'Пару способов: прогулки, музыка, общение', score: 4 },
      { value: '3', label: 'Один-два способа, не всегда помогают', score: 3 },
      { value: '2', label: 'В основном нездоровые: алкоголь, еда, телефон', score: 2 },
      { value: '1', label: 'Не знаю, как справляться со стрессом', score: 1 }
    ]
  },
  {
    id: 'sm3',
    text: 'Как стресс влияет на ваш сон?',
    options: [
      { value: '5', label: 'Не влияет — я сплю нормально', score: 5 },
      { value: '4', label: 'Иногда сложнее заснуть', score: 4 },
      { value: '3', label: 'Часто плохо сплю из-за тревожных мыслей', score: 3 },
      { value: '2', label: 'Сон нарушен: бессонница или кошмары', score: 2 },
      { value: '1', label: 'Серьезные проблемы со сном', score: 1 }
    ]
  },
  {
    id: 'sm4',
    text: 'Как быстро вы восстанавливаетесь после стрессовой ситуации?',
    options: [
      { value: '5', label: 'Очень быстро — через несколько минут или часов', score: 5 },
      { value: '4', label: 'За день-два прихожу в норму', score: 4 },
      { value: '3', label: 'Нужна неделя, чтобы полностью восстановиться', score: 3 },
      { value: '2', label: 'Долго переживаю — недели или месяцы', score: 2 },
      { value: '1', label: 'Не восстанавливаюсь — стресс накапливается', score: 1 }
    ]
  },
  {
    id: 'sm5',
    text: 'Умеете ли вы говорить "нет", чтобы не перегружаться?',
    options: [
      { value: '5', label: 'Да, легко отказываю, когда понимаю что перегружен', score: 5 },
      { value: '4', label: 'Чаще да, чем нет', score: 4 },
      { value: '3', label: 'Сложно отказывать, но иногда получается', score: 3 },
      { value: '2', label: 'Почти не умею говорить "нет"', score: 2 },
      { value: '1', label: 'Никогда не отказываю, беру на себя все', score: 1 }
    ]
  }
];

export function getStressManagementResults(answers: Record<string, string>): TestResult {
  const score = Object.values(answers).reduce((sum, val) => sum + parseInt(val), 0);
  const maxScore = 25;
  const percentage = (score / maxScore) * 100;

  let category = '';
  let interpretation = '';
  let recommendations: string[] = [];

  if (percentage >= 80) {
    category = 'Отличная стрессоустойчивость';
    interpretation = 'У вас высокая устойчивость к стрессу! Вы знаете, как управлять своим состоянием, имеете здоровые способы справляться с напряжением и быстро восстанавливаетесь. Вы умеете защищать свои границы и не перегружаться.';
    recommendations = [
      'Продолжайте практиковать свои методы снятия стресса',
      'Делитесь опытом с семьей — научите их своим техникам',
      'Будьте внимательны к ранним признакам выгорания'
    ];
  } else if (percentage >= 60) {
    category = 'Средняя стрессоустойчивость';
    interpretation = 'Вы в целом справляетесь со стрессом, но есть моменты, когда он вас перегружает. У вас есть способы снятия напряжения, но можно расширить их арсенал и улучшить навыки восстановления.';
    recommendations = [
      'Создайте "набор антистресс": 5-10 способов снятия напряжения на разные случаи',
      'Практикуйте дыхательные упражнения: 4-7-8 (вдох 4, задержка 7, выдох 8)',
      'Введите ежедневную практику релаксации хотя бы 10 минут',
      'Учитесь делегировать и говорить "нет"',
      'Следите за балансом работы и отдыха'
    ];
  } else if (percentage >= 40) {
    category = 'Низкая стрессоустойчивость';
    interpretation = 'Стресс часто перегружает вас и негативно влияет на жизнь. Возможно, вы не знаете эффективных способов справляться с напряжением или используете нездоровые методы. Важно научиться управлять стрессом.';
    recommendations = [
      'Начните вести дневник стресса: что вызывает, как реагирую, что помогает',
      'Освойте базовую технику: глубокое диафрагмальное дыхание',
      'Введите регулярную физическую активность — это естественный антидепрессант',
      'Ограничьте кофеин и сахар — они усиливают стресс',
      'Рассмотрите медитацию или йогу',
      'Консультация с психологом поможет найти индивидуальные стратегии'
    ];
  } else {
    category = 'Критический уровень стресса';
    interpretation = 'Вы находитесь в состоянии хронического стресса, что может серьезно влиять на здоровье и качество жизни. Стресс нарушает сон, влияет на отношения и общее самочувствие. Важно срочно принять меры.';
    recommendations = [
      '⚠️ ВАЖНО: обратитесь к врачу или психологу — хронический стресс требует помощи',
      'Начните с базового: сон не менее 7-8 часов, регулярное питание, вода',
      'Исключите или минимизируйте главные стрессоры',
      'Практикуйте "правило 5-5-5": это будет иметь значение через 5 дней? 5 недель? 5 лет?',
      'Изучите техники mindfulness и прогрессивной мышечной релаксации',
      'Найдите хобби или активность, которая приносит радость',
      'Рассмотрите краткосрочную терапию КПТ'
    ];
  }

  return {
    score,
    maxScore,
    category,
    interpretation,
    recommendations
  };
}
