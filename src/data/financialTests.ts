import { TestQuestion, TestResult } from '@/components/InteractiveTest';

export const financialLiteracyQuestions: TestQuestion[] = [
  {
    id: 'fl1',
    text: 'Как вы планируете семейный бюджет?',
    options: [
      { value: '5', label: 'Подробный план: доходы, расходы, накопления, инвестиции', score: 5 },
      { value: '4', label: 'Есть план основных доходов и расходов', score: 4 },
      { value: '3', label: 'Примерно знаю, сколько зарабатываем и тратим', score: 3 },
      { value: '2', label: 'Планирую от зарплаты до зарплаты', score: 2 },
      { value: '1', label: 'Не планирую — живу как получается', score: 1 }
    ]
  },
  {
    id: 'fl2',
    text: 'Есть ли у вас финансовая подушка безопасности?',
    options: [
      { value: '5', label: 'Да, на 6+ месяцев расходов', score: 5 },
      { value: '4', label: 'Да, на 3-6 месяцев', score: 4 },
      { value: '3', label: 'Есть небольшие накопления (1-2 месяца)', score: 3 },
      { value: '2', label: 'Нет, но планирую создать', score: 2 },
      { value: '1', label: 'Нет и не вижу возможности создать', score: 1 }
    ]
  },
  {
    id: 'fl3',
    text: 'Как вы относитесь к кредитам и займам?',
    options: [
      { value: '5', label: 'Использую только для крупных активов (ипотека) под низкий процент', score: 5 },
      { value: '4', label: 'Беру редко, всегда рассчитываю возможности погашения', score: 4 },
      { value: '3', label: 'Иногда беру потребительские кредиты', score: 3 },
      { value: '2', label: 'Часто живу в кредит, сложно отказаться', score: 2 },
      { value: '1', label: 'Постоянно в долгах, беру новые чтобы погасить старые', score: 1 }
    ]
  },
  {
    id: 'fl4',
    text: 'Знаете ли вы о налоговых вычетах, которые можете получить?',
    options: [
      { value: '5', label: 'Да, регулярно получаю все возможные вычеты', score: 5 },
      { value: '4', label: 'Да, получил несколько вычетов', score: 4 },
      { value: '3', label: 'Слышал, но не разбирался подробно', score: 3 },
      { value: '2', label: 'Смутно представляю что это', score: 2 },
      { value: '1', label: 'Не знаю ничего о вычетах', score: 1 }
    ]
  },
  {
    id: 'fl5',
    text: 'Как вы инвестируете свободные деньги?',
    options: [
      { value: '5', label: 'Диверсифицированный портфель: акции, облигации, недвижимость', score: 5 },
      { value: '4', label: 'Есть накопления в нескольких инструментах (вклады, ИИС)', score: 4 },
      { value: '3', label: 'Только банковский вклад', score: 3 },
      { value: '2', label: 'Деньги лежат на обычном счете', score: 2 },
      { value: '1', label: 'Свободных денег нет', score: 1 }
    ]
  },
  {
    id: 'fl6',
    text: 'Ведете ли вы учет личных финансов?',
    options: [
      { value: '5', label: 'Да, подробно в приложении или таблице', score: 5 },
      { value: '4', label: 'Да, записываю основные траты', score: 4 },
      { value: '3', label: 'Иногда смотрю выписки по карте', score: 3 },
      { value: '2', label: 'Редко, примерно помню траты', score: 2 },
      { value: '1', label: 'Не веду — не вижу смысла', score: 1 }
    ]
  },
  {
    id: 'fl7',
    text: 'Как вы относитесь к страхованию?',
    options: [
      { value: '5', label: 'Застрахованы жизнь, здоровье, имущество', score: 5 },
      { value: '4', label: 'Есть основные страховки (ОСАГО, жилье)', score: 4 },
      { value: '3', label: 'Только обязательные страховки', score: 3 },
      { value: '2', label: 'Минимум или совсем нет', score: 2 },
      { value: '1', label: 'Считаю страхование бесполезной тратой', score: 1 }
    ]
  },
  {
    id: 'fl8',
    text: 'Как вы принимаете решения о крупных покупках?',
    options: [
      { value: '5', label: 'Планирую заранее, откладываю, сравниваю варианты', score: 5 },
      { value: '4', label: 'Обдумываю несколько дней, изучаю отзывы', score: 4 },
      { value: '3', label: 'Принимаю решение довольно быстро', score: 3 },
      { value: '2', label: 'Часто покупаю импульсивно', score: 2 },
      { value: '1', label: 'Покупаю спонтанно, потом иногда жалею', score: 1 }
    ]
  },
  {
    id: 'fl9',
    text: 'Обсуждаете ли вы финансовые вопросы в семье?',
    options: [
      { value: '5', label: 'Да, регулярно обсуждаем бюджет и планы', score: 5 },
      { value: '4', label: 'Да, говорим о важных финансовых решениях', score: 4 },
      { value: '3', label: 'Иногда, когда возникает необходимость', score: 3 },
      { value: '2', label: 'Редко — каждый сам по себе', score: 2 },
      { value: '1', label: 'Нет, это табу или источник конфликтов', score: 1 }
    ]
  },
  {
    id: 'fl10',
    text: 'Есть ли у вас долгосрочные финансовые цели?',
    options: [
      { value: '5', label: 'Да, четкие цели с планом достижения (пенсия, жилье, образование детей)', score: 5 },
      { value: '4', label: 'Да, есть общие цели и примерный план', score: 4 },
      { value: '3', label: 'Есть мечты, но без конкретного плана', score: 3 },
      { value: '2', label: 'Думаю только о краткосрочных целях', score: 2 },
      { value: '1', label: 'Живу одним днем, не планирую', score: 1 }
    ]
  }
];

export function getFinancialLiteracyResults(answers: Record<string, string>): TestResult {
  const score = Object.values(answers).reduce((sum, val) => sum + parseInt(val), 0);
  const maxScore = 50;
  const percentage = (score / maxScore) * 100;

  let category = '';
  let interpretation = '';
  let recommendations: string[] = [];

  if (percentage >= 80) {
    category = 'Отличная финансовая грамотность';
    interpretation = 'У вас высокий уровень финансовой грамотности! Вы планируете бюджет, имеете накопления, разбираетесь в инвестициях и страховании. Вы обсуждаете финансы в семье и имеете долгосрочные цели. Продолжайте в том же духе!';
    recommendations = [
      'Изучайте новые инвестиционные инструменты для диверсификации',
      'Регулярно пересматривайте финансовые цели',
      'Делитесь знаниями с членами семьи, особенно с детьми',
      'Подумайте о налоговой оптимизации'
    ];
  } else if (percentage >= 60) {
    category = 'Хороший уровень финансовой грамотности';
    interpretation = 'У вас хорошая финансовая грамотность. Вы понимаете основы управления деньгами, ведете учет и планируете. Есть области для улучшения: возможно, стоит углубиться в инвестиции или создать более четкий план накоплений.';
    recommendations = [
      'Создайте финансовую подушку безопасности на 6 месяцев',
      'Изучите возможности налоговых вычетов',
      'Откройте ИИС и начните инвестировать',
      'Автоматизируйте откладывание 10-20% дохода',
      'Прочитайте: "Самый богатый человек в Вавилоне" Джордж Клейсон'
    ];
  } else if (percentage >= 40) {
    category = 'Базовый уровень финансовой грамотности';
    interpretation = 'Ваша финансовая грамотность на базовом уровне. Возможно, у вас нет четкого плана, вы живете от зарплаты до зарплаты, не ведете учет расходов. Важно начать разбираться в финансах — это напрямую влияет на качество жизни.';
    recommendations = [
      'Начните вести учет всех доходов и расходов (приложение или таблица)',
      'Создайте простой бюджет: 50% нужды, 30% желания, 20% накопления',
      'Откройте отдельный счет и откладывайте хотя бы 5% дохода',
      'Изучите правило "сначала заплати себе" — откладывайте сразу после получения зарплаты',
      'Избавьтесь от мелких кредитов и не берите новые',
      'Читайте: "Путь к финансовой свободе" Бодо Шефер'
    ];
  } else {
    category = 'Низкий уровень финансовой грамотности';
    interpretation = 'Ваша финансовая грамотность требует серьезного внимания. Возможно, у вас есть долги, нет накоплений, вы принимаете импульсивные финансовые решения. Важно начать изменения прямо сейчас — даже небольшие шаги приведут к результату.';
    recommendations = [
      'Начните с малого: запишите ВСЕ траты за неделю — это откроет глаза',
      'Правило 24 часов: не покупайте ничего дороже 1000₽ в день покупки',
      'Создайте "чрезвычайный фонд" хотя бы в 10-20 тысяч рублей',
      'Составьте список всех долгов и начните погашать с самого маленького',
      'Найдите одну статью расходов, которую можно сократить (подписки, такси, кафе)',
      'Посмотрите видео курсы по финансовой грамотности (бесплатно на Stepik)',
      'Обратитесь к финансовому консультанту',
      'Главное — сделайте первый шаг сегодня!'
    ];
  }

  return {
    score,
    maxScore,
    category,
    interpretation,
    recommendations
  };
}

export const parentingStyleQuestions: TestQuestion[] = [
  {
    id: 'ps1',
    text: 'Как вы принимаете решения, касающиеся ребенка?',
    options: [
      { value: 'authoritative', label: 'Обсуждаю с ребенком, объясняю причины, но окончательное решение за мной', score: 5 },
      { value: 'authoritarian', label: 'Я решаю, ребенок подчиняется, объяснения не требуются', score: 2 },
      { value: 'permissive', label: 'Ребенок сам решает большинство вопросов', score: 3 },
      { value: 'uninvolved', label: 'Стараюсь не вмешиваться, пусть учится на своих ошибках', score: 1 }
    ]
  },
  {
    id: 'ps2',
    text: 'Как вы реагируете на плохое поведение ребенка?',
    options: [
      { value: 'explain', label: 'Объясняю почему так нельзя, устанавливаю последствия', score: 5 },
      { value: 'punish', label: 'Наказываю без долгих объяснений', score: 2 },
      { value: 'ignore', label: 'Стараюсь не обращать внимания', score: 1 },
      { value: 'negotiate', label: 'Пытаюсь договориться, иногда уступаю', score: 3 }
    ]
  },
  {
    id: 'ps3',
    text: 'Насколько вы вовлечены в жизнь ребенка?',
    options: [
      { value: '5', label: 'Очень вовлечен: знаю друзей, интересы, помогаю с учебой', score: 5 },
      { value: '4', label: 'Интересуюсь, но даю свободу', score: 4 },
      { value: '3', label: 'Знаю основное, детали — на усмотрение ребенка', score: 3 },
      { value: '2', label: 'Мало времени на это', score: 2 },
      { value: '1', label: 'Считаю, что ребенок должен быть самостоятельным', score: 1 }
    ]
  },
  {
    id: 'ps4',
    text: 'Как вы поощряете ребенка за хорошие поступки?',
    options: [
      { value: 'praise', label: 'Хвалю конкретные действия, объясняю что именно хорошо', score: 5 },
      { value: 'reward', label: 'Даю материальные награды (деньги, подарки)', score: 3 },
      { value: 'rare', label: 'Редко хвалю — не хочу избаловать', score: 2 },
      { value: 'expected', label: 'Хорошее поведение — это норма, незачем поощрять', score: 1 }
    ]
  },
  {
    id: 'ps5',
    text: 'Как вы относитесь к правилам и границам?',
    options: [
      { value: 'clear', label: 'Есть четкие правила, которые мы обсуждали с ребенком', score: 5 },
      { value: 'strict', label: 'Есть строгие правила, ребенок должен их соблюдать', score: 2 },
      { value: 'flexible', label: 'Правила гибкие, зависят от ситуации', score: 3 },
      { value: 'none', label: 'Минимум правил, максимум свободы', score: 1 }
    ]
  }
];

export function getParentingStyleResults(answers: Record<string, string>): TestResult {
  const styles: Record<string, number> = {
    authoritative: 0,
    authoritarian: 0,
    permissive: 0,
    uninvolved: 0
  };

  Object.values(answers).forEach((answer) => {
    const numericScore = parseInt(answer);
    if (!isNaN(numericScore)) {
      if (numericScore === 5) styles.authoritative++;
      else if (numericScore === 3 || numericScore === 4) styles.permissive++;
      else if (numericScore === 2) styles.authoritarian++;
      else styles.uninvolved++;
    } else {
      if (answer.includes('authoritative') || answer === 'explain' || answer === 'praise' || answer === 'clear') {
        styles.authoritative++;
      } else if (answer.includes('authoritarian') || answer === 'punish' || answer === 'strict') {
        styles.authoritarian++;
      } else if (answer.includes('permissive') || answer === 'negotiate' || answer === 'reward' || answer === 'flexible') {
        styles.permissive++;
      } else {
        styles.uninvolved++;
      }
    }
  });

  const dominantStyle = Object.entries(styles).sort((a, b) => b[1] - a[1])[0][0];
  const score = styles[dominantStyle] * 10;
  const maxScore = 50;

  let category = '';
  let interpretation = '';
  let recommendations: string[] = [];

  if (dominantStyle === 'authoritative') {
    category = 'Авторитетный стиль';
    interpretation = 'У вас авторитетный (демократический) стиль воспитания — наиболее эффективный! Вы устанавливаете четкие границы, но объясняете их причины. Вы поддерживаете и слушаете ребенка, при этом сохраняя родительский авторитет. Дети таких родителей вырастают уверенными, ответственными и эмоционально зрелыми.';
    recommendations = [
      'Продолжайте баланс между поддержкой и требовательностью',
      'Регулярно пересматривайте правила по мере взросления ребенка',
      'Учите ребенка аргументированно защищать свою точку зрения',
      'Делитесь опытом с другими родителями'
    ];
  } else if (dominantStyle === 'permissive') {
    category = 'Либеральный стиль';
    interpretation = 'У вас либеральный (попустительский) стиль воспитания. Вы теплы и поддерживаете ребенка, но иногда слишком снисходительны. Недостаток границ может привести к проблемам с самоконтролем и уважением авторитетов у ребенка.';
    recommendations = [
      'Установите несколько четких, непоколебимых правил',
      'Объясняйте ребенку последствия действий и выполняйте обещания',
      'Не бойтесь говорить "нет" — это тоже проявление любви',
      'Поощряйте ответственность через домашние обязанности',
      'Читайте: "Как говорить, чтобы дети слушали" Фабер и Мазлиш'
    ];
  } else if (dominantStyle === 'authoritarian') {
    category = 'Авторитарный стиль';
    interpretation = 'У вас авторитарный стиль воспитания. Вы требовательны и устанавливаете строгие правила, но недостаточно поддерживаете эмоционально. Дети могут вырасти послушными, но с низкой самооценкой, тревожностью и сложностями в принятии решений.';
    recommendations = [
      'Учитесь объяснять причины правил, а не просто требовать послушания',
      'Давайте ребенку больше выбора в несущественных вопросах',
      'Практикуйте эмпатию: спрашивайте о чувствах ребенка',
      'Хвалите не только результаты, но и старания',
      'Изучайте эмоциональный интеллект',
      'Читайте: "Общаться с ребенком. Как?" Юлия Гиппенрейтер'
    ];
  } else {
    category = 'Отстраненный стиль';
    interpretation = 'У вас отстраненный стиль воспитания. Возможно, вы заняты или считаете, что ребенок должен быть максимально независимым. Недостаток вовлеченности может привести к эмоциональным проблемам у ребенка, низкой самооценке и трудностям в отношениях.';
    recommendations = [
      'Выделяйте качественное время для общения с ребенком каждый день',
      'Интересуйтесь жизнью ребенка: школа, друзья, увлечения',
      'Установите несколько семейных традиций (ужин вместе, игры по выходным)',
      'Показывайте физическую привязанность (объятия, поцелуи)',
      'Если причина в усталости — обратитесь за помощью к родственникам или психологу',
      'Помните: детям нужно ваше время больше, чем материальные блага'
    ];
  }

  return {
    score,
    maxScore,
    category,
    interpretation,
    recommendations
  };
}

export const timeManagementQuestions: TestQuestion[] = [
  {
    id: 'tm1',
    text: 'Как вы планируете свой день?',
    options: [
      { value: '5', label: 'Подробный план с приоритетами и временными блоками', score: 5 },
      { value: '4', label: 'Есть список дел на день', score: 4 },
      { value: '3', label: 'Держу основные дела в голове', score: 3 },
      { value: '2', label: 'Планирую редко, делаю что срочно', score: 2 },
      { value: '1', label: 'Не планирую, живу по обстоятельствам', score: 1 }
    ]
  },
  {
    id: 'tm2',
    text: 'Как часто вы откладываете важные дела?',
    options: [
      { value: '5', label: 'Почти никогда — делаю важное в первую очередь', score: 5 },
      { value: '4', label: 'Редко — обычно справляюсь вовремя', score: 4 },
      { value: '3', label: 'Иногда откладываю, но потом догоняю', score: 3 },
      { value: '2', label: 'Часто прокрастинирую', score: 2 },
      { value: '1', label: 'Постоянно откладываю все до последнего', score: 1 }
    ]
  },
  {
    id: 'tm3',
    text: 'Умеете ли вы отказываться от второстепенных дел?',
    options: [
      { value: '5', label: 'Да, легко говорю "нет" если это не приоритет', score: 5 },
      { value: '4', label: 'Чаще да, чем нет', score: 4 },
      { value: '3', label: 'Сложно отказывать, но иногда получается', score: 3 },
      { value: '2', label: 'Редко отказываю', score: 2 },
      { value: '1', label: 'Никогда не отказываю, беру все на себя', score: 1 }
    ]
  },
  {
    id: 'tm4',
    text: 'Как вы справляетесь с отвлечениями (телефон, соцсети)?',
    options: [
      { value: '5', label: 'Отлично: отключаю уведомления в рабочее время', score: 5 },
      { value: '4', label: 'Хорошо: стараюсь контролировать', score: 4 },
      { value: '3', label: 'Средне: часто отвлекаюсь', score: 3 },
      { value: '2', label: 'Плохо: постоянно проверяю телефон', score: 2 },
      { value: '1', label: 'Не контролирую: теряю много времени', score: 1 }
    ]
  },
  {
    id: 'tm5',
    text: 'Успеваете ли вы делать то, что запланировали?',
    options: [
      { value: '5', label: 'Да, почти всегда выполняю план', score: 5 },
      { value: '4', label: 'Чаще да: выполняю 70-80% плана', score: 4 },
      { value: '3', label: 'Около половины дел', score: 3 },
      { value: '2', label: 'Редко успеваю все', score: 2 },
      { value: '1', label: 'Постоянно не хватает времени', score: 1 }
    ]
  }
];

export function getTimeManagementResults(answers: Record<string, string>): TestResult {
  const score = Object.values(answers).reduce((sum, val) => sum + parseInt(val), 0);
  const maxScore = 25;
  const percentage = (score / maxScore) * 100;

  let category = '';
  let interpretation = '';
  let recommendations: string[] = [];

  if (percentage >= 80) {
    category = 'Отличное управление временем';
    interpretation = 'У вас отличные навыки тайм-менеджмента! Вы планируете свой день, расставляете приоритеты, избегаете прокрастинации и контролируете отвлечения. Вы успеваете делать важные дела и сохраняете баланс.';
    recommendations = [
      'Продолжайте совершенствовать свою систему планирования',
      'Помогайте другим членам семьи развивать навыки тайм-менеджмента',
      'Экспериментируйте с новыми техниками (таймбоксинг, правило 2 минут)',
      'Не забывайте про отдых и восстановление'
    ];
  } else if (percentage >= 60) {
    category = 'Хорошее управление временем';
    interpretation = 'У вас хорошие навыки управления временем. Вы планируете и расставляете приоритеты, но иногда сталкиваетесь с прокрастинацией или отвлечениями. Небольшие улучшения помогут стать еще продуктивнее.';
    recommendations = [
      'Используйте матрицу Эйзенхауэра для расстановки приоритетов',
      'Практикуйте технику Pomodoro: 25 минут работы, 5 минут отдыха',
      'Планируйте день с вечера, а неделю — в воскресенье',
      'Группируйте однотипные задачи (батчинг)',
      'Читайте: "Тайм-драйв" Глеб Архангельский'
    ];
  } else if (percentage >= 40) {
    category = 'Требуется улучшение';
    interpretation = 'Ваше управление временем нуждается в улучшении. Возможно, вы часто откладываете дела, не планируете или легко отвлекаетесь. Это приводит к стрессу и ощущению, что время ускользает. Хорошая новость — навыки тайм-менеджмента можно развить!';
    recommendations = [
      'Начните с малого: планируйте только следующий день',
      'Правило 3: выберите 3 самых важных дела на день',
      'Уберите отвлекающие факторы: отключите уведомления на телефоне',
      'Используйте таймер: даже 15 минут фокусировки — это результат',
      'Заведите привычку: делайте самое сложное дело с утра',
      'Читайте: "Экстремальный тайм-менеджмент" Ян Яндтсен'
    ];
  } else {
    category = 'Хаотичное управление временем';
    interpretation = 'Управление временем — ваше слабое место. Возможно, вы не планируете, постоянно откладываете дела, теряете время на отвлечения. Это создает хронический стресс и ощущение, что вы ничего не успеваете. Важно изменить подход к времени.';
    recommendations = [
      'Начните отслеживать время: запишите чем занимались каждый час 3 дня подряд',
      'Это покажет ваших "пожирателей времени" (соцсети, ютуб и т.д.)',
      'Правило "съесть лягушку": делайте самое неприятное дело первым',
      'Создайте утренний ритуал: даже 15-минутная рутина структурирует день',
      'Используйте внешние напоминания: будильники, стикеры, календарь',
      'Найдите партнера по ответственности: обещайте кому-то выполнить задачу к сроку',
      'Посмотрите курс по тайм-менеджменту (бесплатно на Coursera)',
      'Самое важное: начните СЕЙЧАС, не откладывайте изменения!'
    ];
  }

  return {
    score,
    maxScore,
    category,
    interpretation,
    recommendations
  };
}