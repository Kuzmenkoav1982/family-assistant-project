# Структура приложения "Семейный Ассистент Pro"

Документация по текущей структуре приложения (обновлено: 07.12.2025)

---

## 1. Обзор приложения

**Семейный Ассистент Pro** - это современный семейный органайзер для управления всеми аспектами семейной жизни: задачами, календарём, рецептами, путешествиями, финансами, развитием детей и многим другим.

**Технологический стек:**
- Frontend: React + TypeScript + Vite
- Styling: Tailwind CSS + shadcn/ui
- Routing: React Router
- State: Redux Toolkit
- Icons: Lucide React

---

## 2. Навигационная структура

### 2.1 TopBar (Верхняя панель)

Доступные кнопки (настраиваются пользователем):

| ID | Иконка | Название | Назначение |
|---|---|---|---|
| `stats` | Users | Счётчик семей | Статистика платформы |
| `voting` | Vote | Голосования | Голосование за новые функции |
| `auth` | LogIn | Вход/Выход | Авторизация пользователя |
| `reset` | RotateCcw | Сбросить демо | Сброс демо-данных (только для неавторизованных) |
| `settings` | Settings | Настройки | Настройки приложения |
| `instructions` | BookOpen | Инструкции | Помощь по разделам |
| `presentation` | FileText | Презентация | Презентация проекта |
| `profile` | UserCircle | Профиль | Профиль текущего пользователя |
| `familySwitcher` | Users | Переключатель семьи | Выбор активной семьи |
| `language` | Languages | Язык | Переключение языка интерфейса |
| `style` | Palette | Стиль | Выбор темы оформления |
| `appearance` | Moon | Оформление | Настройки внешнего вида |

**По умолчанию активны:** stats, voting, auth, settings, familySwitcher, language, style

**Автоскрытие:** Настраивается пользователем

---

### 2.2 LeftMenu (Левое боковое меню)

**Статичные элементы:**
1. **Помощь и поддержка** - диалог с Кузей (виртуальный помощник)

**Динамические разделы** (настраиваются пользователем):

| ID | Иконка | Название | Маршрут/Действие |
|---|---|---|---|
| `family` | Users | Профили семьи | Отображение в основной области |
| `tasks` | CheckSquare | Задачи | Отображение в основной области |
| `recipes` | ChefHat | Рецепты | → `/recipes` |
| `trips` | Plane | Путешествия | → `/trips` |
| `analytics` | BarChart3 | Аналитика | → `/analytics` |
| `calendar` | Calendar | Календарь | → `/calendar` |
| `goals` | Target | Цели | Отображение в основной области |
| `values` | Heart | Ценности | Отображение в основной области |
| `traditions` | Sparkles | Традиции | Отображение в основной области |
| `shopping` | ShoppingCart | Покупки | → `/shopping` |
| `meals` | UtensilsCrossed | Меню | Отображение в основной области |

**По умолчанию:** Все разделы активны

**Автоскрытие:** Настраивается пользователем

---

### 2.3 BottomBar (Нижняя панель)

Быстрый доступ к 4 ключевым разделам (настраивается пользователем).

**По умолчанию активны:**
- Analytics (Аналитика)
- Children (Дети)
- Calendar (Календарь)
- Shopping (Покупки)

**Доступны все разделы из LeftMenu**

---

## 3. Основные страницы приложения

### 3.1 Главные страницы

#### 3.1.1 Welcome (`/` или `/welcome`)
- Приветственная страница для новых пользователей
- Онбординг и знакомство с приложением

#### 3.1.2 Index (`/index`)
- Главный экран приложения
- Отображение активного раздела из LeftMenu
- Виджеты и карточки членов семьи

---

### 3.2 Управление семьёй

#### 3.2.1 Family Management (`/family-management`)
**Назначение:** Централизованное управление семьёй

**Функции:**
- Просмотр всех членов семьи
- Добавление новых членов
- Редактирование профилей
- Удаление членов
- Переход к детальному профилю

#### 3.2.2 Member Profile (`/member/:id`)
**Назначение:** Детальный профиль члена семьи

**Разделы:**
- Основная информация (имя, возраст, роль, аватар)
- Активные задачи
- Календарь событий
- Достижения и награды
- История активности

#### 3.2.3 Family Invite (`/family-invite`)
**Назначение:** Приглашение новых членов в семью

**Функции:**
- Генерация пригласительного кода
- Отправка приглашений по email
- Управление активными приглашениями

#### 3.2.4 Join Family (`/join/:code`)
**Назначение:** Присоединение к семье по коду

---

### 3.3 Настройки и конфигурация

#### 3.3.1 Settings (`/settings`)
**Назначение:** Основные настройки приложения

**Разделы:**
1. **Настройки семьи** → `/family-management`
   - Управление членами семьи
   
2. **Права доступа** → `/permissions`
   - Управление разрешениями для членов семьи
   
3. **Язык и регион**
   - Выбор языка интерфейса
   - Региональные настройки
   
4. **Тема оформления**
   - Светлая/тёмная тема
   - Акцентные цвета
   
5. **Уведомления**
   - Push-уведомления
   - Email-уведомления
   - Настройки звуков

#### 3.3.2 Permissions (`/permissions`)
**Назначение:** Управление правами доступа членов семьи

**Функции:**
- Просмотр текущих разрешений
- Назначение ролей (Родитель, Взрослый, Подросток, Ребёнок)
- Настройка доступа к разделам
- Ограничение действий (создание, редактирование, удаление)

#### 3.3.3 Family Settings (`/family-settings`)
**Назначение:** Специфичные настройки семьи

**Функции:**
- Название семьи
- Логотип/аватар семьи
- Основные ценности
- Семейные правила

---

### 3.4 Основные модули

#### 3.4.1 Calendar (`/calendar`)
**Назначение:** Семейный календарь событий

**Функции:**
- Просмотр по дням/неделям/месяцам
- Создание событий
- Назначение участников
- Напоминания
- Повторяющиеся события

#### 3.4.2 Tasks (в Index)
**Назначение:** Управление семейными задачами

**Функции:**
- Создание задач
- Назначение исполнителей
- Установка дедлайнов
- Отслеживание прогресса
- Награды за выполнение

#### 3.4.3 Shopping (`/shopping`)
**Назначение:** Список покупок

**Функции:**
- Создание списков покупок
- Категории товаров
- Отметка о покупке
- Общий доступ для семьи
- История покупок

#### 3.4.4 Recipes (`/recipes`)
**Назначение:** Семейная книга рецептов

**Функции:**
- Добавление рецептов
- Категории (завтрак, обед, десерты и т.д.)
- Ингредиенты
- Пошаговые инструкции
- Фотографии
- Избранное
- Планирование меню

#### 3.4.5 Trips (`/trips`)
**Назначение:** Планирование путешествий

**Страницы:**
- `/trips` - Список всех путешествий
- `/trips/:id` - Детали путешествия
- `/trip-wishlist` - Список желаемых направлений

**Функции:**
- Создание поездок
- Маршруты и достопримечательности
- Бюджет поездки
- Список вещей
- Фотографии и воспоминания
- Wishlist направлений

---

### 3.5 Модуль "Дети"

#### 3.5.1 Children (`/children`)
**Назначение:** Главная страница модуля развития детей

**Разделы:**
- Профили детей
- Быстрая статистика по развитию
- Ближайшие события
- Активные задачи

#### 3.5.2 Development (`/development`)
**Назначение:** Отслеживание развития ребёнка

**Функции:**
- Физическое развитие (рост, вес)
- Когнитивное развитие
- Социальное развитие
- Эмоциональное развитие
- Графики прогресса
- Milestone tracking

#### 3.5.3 Education (`/education`)
**Назначение:** Образование детей

**Функции:**
- Расписание занятий
- Домашние задания
- Оценки и успеваемость
- Родительские собрания
- Контакты учителей

#### 3.5.4 Health (`/health`)
**Назначение:** Здоровье детей

**Функции:**
- Медицинская карта
- Прививки
- Визиты к врачу
- Анализы
- Аллергии и непереносимости
- Лекарства

#### 3.5.5 Nutrition (`/nutrition`)
**Назначение:** Питание детей

**Функции:**
- Дневник питания
- Предпочтения и аллергии
- Рецепты для детей
- Рекомендации по возрасту

---

### 3.6 Аналитика и отчёты

#### 3.6.1 Analytics (`/analytics`)
**Назначение:** Общая аналитика по семье

**Разделы:**
- Статистика выполнения задач
- Активность членов семьи
- Финансовая сводка
- Время, проведённое вместе

#### 3.6.2 Assessment Report (`/assessment-report`)
**Назначение:** Детальный отчёт по оценке семьи

**Функции:**
- Оценка сплочённости
- Оценка коммуникации
- Рекомендации по улучшению

---

### 3.7 Дополнительные модули

#### 3.7.1 Finance (`/finance`)
**Назначение:** Управление семейным бюджетом

**Функции:**
- Доходы и расходы
- Категории трат
- Бюджетирование
- Финансовые цели
- Отчёты и графики

#### 3.7.2 Meals (`/meals`)
**Назначение:** Планирование питания

**Функции:**
- Меню на неделю
- Автоматический список покупок
- Калорийность
- Баланс БЖУ

#### 3.7.3 Pets (`/pets`)
**Назначение:** Управление домашними питомцами

**Функции:**
- Профили питомцев
- График кормления
- Визиты к ветеринару
- Прививки
- Расходы на питомцев

#### 3.7.4 Garage (`/garage`)
**Назначение:** Управление автомобилями

**Функции:**
- Профили автомобилей
- ТО и сервис
- Расходы на авто
- Страховка
- Документы

---

### 3.8 Семейная культура

#### 3.8.1 Family Rules (`/rules`)
**Назначение:** Семейные правила и принципы

**Функции:**
- Создание правил
- Голосование за правила
- Отслеживание соблюдения

#### 3.8.2 Cohesion (`/cohesion`)
**Назначение:** Семейная сплочённость

**Функции:**
- Оценка сплочённости
- Совместные активности
- Семейные традиции
- Время вместе

#### 3.8.3 Family Psychologist (`/psychologist`)
**Назначение:** Психологическая поддержка семьи

**Функции:**
- Консультации психолога
- Тесты и опросники
- Рекомендации
- История сессий

#### 3.8.4 Faith (`/faith`)
**Назначение:** Духовная жизнь семьи

**Функции:**
- Религиозные события
- Молитвы и практики
- Духовные ценности

#### 3.8.5 Tree (`/tree`)
**Назначение:** Семейное древо

**Функции:**
- Генеалогическое древо
- Родственные связи
- История семьи
- Фотоархив

---

### 3.9 Служебные страницы

#### 3.9.1 Instructions (`/instructions`)
**Назначение:** Помощь и инструкции

**Функции:**
- Руководства по разделам
- FAQ
- Видеоуроки

#### 3.9.2 Presentation (`/presentation`)
**Назначение:** Презентация проекта

**Функции:**
- О проекте
- Основные возможности
- Демонстрация функционала

#### 3.9.3 AI Assistant (`/ai-assistant`)
**Назначение:** ИИ-помощник

**Функции:**
- Чат с ИИ
- Рекомендации
- Ответы на вопросы
- Автоматизация задач

#### 3.9.4 Voting Page (`/voting`)
**Назначение:** Голосование за новые функции

**Функции:**
- Список предлагаемых функций
- Голосование за приоритеты
- Комментарии и предложения

---

### 3.10 Административные страницы

#### 3.10.1 Admin Login (`/admin/login`)
**Назначение:** Вход для администраторов

#### 3.10.2 Admin Support (`/admin/support`)
**Назначение:** Панель поддержки

**Функции:**
- Просмотр обращений
- Ответы пользователям
- Статистика поддержки

---

### 3.11 Специальные страницы

#### 3.11.1 Community (`/community`)
**Назначение:** Сообщество пользователей

**Функции:**
- Форум
- Обмен опытом
- Публикации
- Мероприятия

#### 3.11.2 Nationalities (`/nationalities`)
**Назначение:** База национальностей

**Функции:**
- Список национальностей
- Детальная информация
- Традиции и культура

#### 3.11.3 Launch Plan (`/launch-plan`)
**Назначение:** План развития проекта

**Функции:**
- Дорожная карта
- Этапы развития
- Новые функции

#### 3.11.4 Feedback Page (`/feedback`)
**Назначение:** Обратная связь

**Функции:**
- Отправка отзывов
- Сообщение об ошибках
- Предложения улучшений

#### 3.11.5 Support Page (`/support`)
**Назначение:** Техническая поддержка

**Функции:**
- Обращение в поддержку
- История обращений
- База знаний

---

### 3.12 Юридические страницы

#### 3.12.1 Privacy Policy (`/privacy`)
**Назначение:** Политика конфиденциальности

#### 3.12.2 Terms of Service (`/terms`)
**Назначение:** Условия использования

---

### 3.13 Отладка и тестирование

#### 3.13.1 Debug Auth (`/debug-auth`)
**Назначение:** Отладка авторизации

#### 3.13.2 OAuth Debug (`/oauth-debug`)
**Назначение:** Отладка OAuth

---

## 4. Компоненты UI

### 4.1 shadcn/ui компоненты

Расположение: `src/components/ui/`

**Основные компоненты:**
- `button` - Кнопки
- `input` - Поля ввода
- `card` - Карточки
- `dialog` - Модальные окна
- `dropdown-menu` - Выпадающие меню
- `select` - Селекторы
- `tabs` - Вкладки
- `badge` - Бейджи
- `avatar` - Аватары
- `calendar` - Календарь
- `checkbox` - Чекбоксы
- `progress` - Прогресс-бары
- `toast` - Уведомления
- `icon` - Обёртка для иконок Lucide

### 4.2 Кастомные компоненты

#### 4.2.1 Навигация
- `TopBar` - Верхняя панель
- `LeftMenu` - Левое меню
- `BottomBar` - Нижняя панель

#### 4.2.2 Профили
- `ProfileCard` - Карточка профиля
- `ProfileOnboarding` - Онбординг профиля
- `MemberCard` - Карточка члена семьи

#### 4.2.3 Задачи
- `TaskCard` - Карточка задачи
- `TaskForm` - Форма создания задачи
- `TaskList` - Список задач

#### 4.2.4 Календарь
- `EventCard` - Карточка события
- `CalendarGrid` - Сетка календаря
- `EventForm` - Форма события

---

## 5. Роли и разрешения

### 5.1 Роли пользователей

| Роль | Уровень доступа | Возможности |
|---|---|---|
| **Родитель** | Полный | Все действия, включая управление семьёй |
| **Взрослый** | Высокий | Создание/редактирование контента, ограниченное управление |
| **Подросток** | Средний | Создание контента, просмотр большинства данных |
| **Ребёнок** | Базовый | Просмотр разрешённого контента, выполнение задач |

### 5.2 Матрица разрешений

**Управление семьёй:**
- Добавление членов: Родитель
- Удаление членов: Родитель
- Редактирование профилей: Родитель, Взрослый (свой профиль)
- Назначение ролей: Родитель

**Задачи:**
- Создание: Родитель, Взрослый
- Назначение: Родитель, Взрослый
- Выполнение: Все
- Удаление: Родитель, Взрослый (свои задачи)

**Календарь:**
- Создание событий: Родитель, Взрослый, Подросток
- Редактирование: Создатель, Родитель
- Удаление: Создатель, Родитель

**Финансы:**
- Просмотр: Родитель, Взрослый
- Создание записей: Родитель, Взрослый
- Редактирование: Родитель
- Удаление: Родитель

---

## 6. Локальное хранилище (localStorage)

### 6.1 Сохраняемые настройки

```typescript
// Навигация
'leftPanelSections': string[]      // Активные разделы левого меню
'bottomBarSections': string[]      // Активные разделы нижней панели
'topPanelSections': string[]       // Активные кнопки верхней панели

// Автоскрытие
'autoHideTopBar': boolean          // Автоскрытие верхней панели
'autoHideLeftMenu': boolean        // Автоскрытие левого меню
'autoHideBottomBar': boolean       // Автоскрытие нижней панели

// Виджеты
'widgetSettings': WidgetConfig[]   // Настройки виджетов главной страницы

// Тема
'theme': 'light' | 'dark'          // Светлая/тёмная тема
'accentColor': string              // Акцентный цвет
```

---

## 7. Маршрутизация

### 7.1 Основные маршруты

```
/ или /welcome          → Welcome (приветственная страница)
/index                  → Index (главная страница)
/settings               → Settings
/family-management      → FamilyManagement
/permissions            → Permissions
/calendar               → Calendar
/shopping               → Shopping
/recipes                → Recipes
/trips                  → Trips
/trips/:id              → TripDetails
/trip-wishlist          → TripWishlist
/analytics              → Analytics
/member/:id             → MemberProfile
/family-invite          → FamilyInvite
/join/:code             → JoinFamily
/instructions           → Instructions
/presentation           → Presentation
/children               → Children
/development            → Development
/education              → Education
/health                 → Health
/nutrition              → Nutrition
/finance                → Finance
/meals                  → Meals
/pets                   → Pets
/garage                 → Garage
/rules                  → FamilyRules
/cohesion               → Cohesion
/psychologist           → FamilyPsychologist
/faith                  → Faith
/tree                   → Tree
/ai-assistant           → AIAssistant
/voting                 → VotingPage
/community              → Community
/nationalities          → NationalitiesPage
/nationalities/:code    → NationalityDetailPage
/launch-plan            → LaunchPlan
/feedback               → FeedbackPage
/support                → SupportPage
/privacy                → PrivacyPolicy
/terms                  → TermsOfService
/admin/login            → AdminLogin
/admin/support          → AdminSupport
*                       → NotFound
```

---

## 8. Состояние приложения (Redux)

### 8.1 Основные slice

```typescript
// auth - Авторизация
{
  user: User | null,
  isAuthenticated: boolean,
  token: string | null
}

// family - Семья
{
  currentFamily: Family | null,
  members: FamilyMember[],
  invites: Invite[]
}

// tasks - Задачи
{
  tasks: Task[],
  filters: TaskFilters
}

// calendar - Календарь
{
  events: Event[],
  view: 'day' | 'week' | 'month'
}
```

---

## 9. Интеграции и API

### 9.1 Backend функции

Расположение: `backend/`

**Примеры:**
- `auth` - Авторизация
- `family` - Управление семьёй
- `tasks` - API задач
- `calendar` - API календаря

---

## 10. Будущее развитие

### 10.1 В разработке

**Разделы, планируемые к реализации:**
- Семейный блог
- Генеалогическое древо (расширенное)
- Медицинские карты
- Юридические документы
- Семейный чат

### 10.2 Оптимизация

**Планы:**
- Декомпозиция крупных компонентов
- Улучшение производительности
- PWA поддержка
- Офлайн-режим
- Мобильное приложение (React Native)

---

## 11. Контакты и поддержка

**Сообщество:** https://t.me/+QgiLIa1gFRY4Y2Iy  
**Техподдержка:** Через `/support` в приложении  
**Документация:** https://docs.poehali.dev

---

*Документация актуальна на 07.12.2025. Структура приложения может меняться.*
